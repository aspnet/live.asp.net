@inject Microsoft.ApplicationInsights.AspNetCore.JavaScriptSnippet AppInsightsJs
@inject live.asp.net.Services.CookieConsentService CookieConsentService

@if (CookieConsentService.IsConsentRequired(Context))
{
    var cookieComplianceMarkup = CookieConsentService.GetConsentMarkup(Context);

    foreach (var consentMessageJavascript in cookieComplianceMarkup.Javascripts)
    {
        <script src="@consentMessageJavascript"></script>
    }

    foreach (var consentMessageStylesheet in cookieComplianceMarkup.Stylesheets)
    {
        <link rel="stylesheet" type="text/css" href="@consentMessageStylesheet">
    }
}